<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Jess Form</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
    .fade-out { opacity: 0; transform: scale(0.5); transition: all 1.2s ease; }
    .fade-in { opacity: 1 !important; transform: scale(1) !important; }
</style>
</head>

<body class="bg-black text-white flex items-center justify-center min-h-screen">

<div id="container" class="text-center">

    <h1 id="hiJess" class="text-6xl font-bold mb-4 transition-all opacity-100">
        Hi Jess
    </h1>

    <div id="formSection" class="hidden max-w-md mx-auto mt-8">

        <label class="block mb-1 text-left">Address to deliver the flowers:</label>
        <input id="addressInput" class="w-full p-2 text-black rounded mb-4" type="text">

        <label class="block mb-1 text-left">Favorite Color?</label>
        <input id="colorInput" class="w-full p-2 text-black rounded mb-4" type="text">

        <button id="saveBtn"
                class="bg-pink-600 hover:bg-pink-700 px-4 py-2 rounded text-white font-bold w-full">
            Save Information
        </button>

        <p id="statusMsg" class="text-sm mt-4"></p>

    </div>

</div>

<script>

// Animación inicial
window.onload = () => {
    const hiJess = document.getElementById("hiJess");
    const formSection = document.getElementById("formSection");

    setTimeout(() => {
        hiJess.classList.add("fade-out");

        setTimeout(() => {
            hiJess.style.display = "none";
            formSection.classList.remove("hidden");
            formSection.classList.add("fade-in");
        }, 1200);

    }, 1500);
};


// Evento del botón
document.getElementById("saveBtn").addEventListener("click", async () => {

    const address = document.getElementById("addressInput").value.trim();
    const color = document.getElementById("colorInput").value.trim();
    const statusMsg = document.getElementById("statusMsg");

    if (!address || !color) {
        statusMsg.textContent = "Please fill all fields.";
        statusMsg.style.color = "red";
        return;
    }

    statusMsg.textContent = "Saving...";
    statusMsg.style.color = "yellow";

    try {

        const response = await fetch(
            "https://script.google.com/macros/s/AKfycbwczSPcIDp9JsjdguUzeqjp-8-TsUEfz23eCRT-XubG5KqdALau5JwTWJ1lnWiQidi7/exec",
            {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    address: address,
                    color: color
                })
            }
        );

        // Leer respuesta real
        const text = await response.text();

        if (text.includes("OK")) {
            statusMsg.textContent = "Saved successfully!";
            statusMsg.style.color = "lightgreen";
            document.getElementById("addressInput").value = "";
            document.getElementById("colorInput").value = "";
        } else {
            statusMsg.textContent = "Error saving (Script responded but not OK).";
            statusMsg.style.color = "red";
        }

    } catch (err) {
        statusMsg.textContent = "Error saving (network or script error).";
        statusMsg.style.color = "red";
        console.error(err);
    }

});

</script>

</body>
</html>
